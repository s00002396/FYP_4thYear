@model ICollection<RegistrationMVCCore.Model.PatientDetailsViewModel>
<div class="w3-container">
    <h2>All Patients</h2>
</div>

<div class="w3-cell-row">
    <div class="w3-container w3-blue w3-cell w3-cell-top" style="border-right:2px solid white; ">
        Assigned To
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-middle" style="border-right:2px solid white; ">
        PPS No
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-bottom" style="border-right:2px solid white; ">
        Student Name
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-top" style="border-right:2px solid white; ">
        Address Line1
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-middle" style="border-right:2px solid white; ">
        City
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-middle" style="border-right:2px solid white; ">
        County
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-bottom" style="border-right:2px solid white; ">
        Guardian Name
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-middle" style="border-right:2px solid white; ">
        Phone
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-bottom" style="border-right:2px solid white; ">
        School Name
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-bottom" style="border-right:2px solid white; ">
        Open Date
    </div>
    <div class="w3-container w3-blue w3-cell w3-cell-top" style="border-right:2px solid white; ">
        Close Date
    </div>
    @*<div class="w3-container w3-blue w3-cell w3-cell-middle" style="border-right:2px solid white; ">
        Patient Notes
    </div>*@
</div>

@*<div class="container-fluid" >*@
@*<div class="w3-cell-row">
    @if (Model.Any())
    {
        @foreach (var item in Model)
        {
            <div class="w3-container  w3-cell w3-cell-middle" style="width:100px">
                @item.vmUserAcc.FirstName
            </div>
            <div class="w3-container  w3-cell w3-cell-middle" style="width:75px">
                @item.vmPatientTable.PPS_No
            </div>
            <div class="w3-container  w3-cell w3-cell-middle" style="width:115px">
                @item.vmPatientTable.Name
            </div>
            <div class="w3-container  w3-cell w3-cell-middle" style="width:115px">
                @item.vmPatientTable.AddressLineOne
            </div>
            <div class="w3-container w3-cell w3-cell-middle" style="width:63px">
                @item.vmPatientTable.City
            </div>
            <div class="w3-container w3-cell w3-cell-middle" style="width:73px">
                @item.vmPatientTable.County
            </div>

            <div class="w3-container w3-cell w3-cell-middle" style="width:113px">
                @item.vmGuardian.Name
            </div>
            <div class="w3-container w3-cell w3-cell-middle" style="width:43px">
                @item.vmGuardian.PhoneNo
            </div>
            <div class="w3-container  w3-cell w3-cell-middle" style="width:103px">
                @item.vmSchools.SchoolName
            </div>
            <div class="w3-container w3-cell w3-cell-middle" style="width:63px">
                @item.vmPatientTable.OpenDate.ToString("dd/MM/yyyy")
            </div>
            <div class="w3-container  w3-cell w3-cell-middle" style="width:63px">
                @item.vmPatientTable.CloseDate.ToString()
            </div>
            <div class="w3-container  w3-cell w3-cell-middle">
                <span onclick="showPatient('@item.vmPatientTable.PPS_No')"><i style="margin-left:10px" class="glyphicon glyphicon-info-sign"></i></span>
            </div>
            <hr /><br />
        }
    }
    else
    {
        <p>No records found.</p>
    }
</div>*@@*Row*@
@*<hr />*@
<div class="w3-container  w3-cell w3-cell-middle" style="background-color:white">  

</div>
<div class="panel-body" style="height:398px">
    <div class="right-inner-addon" style="width:105px;">
        @if (Model.Any())
        {
            <table class="table table-condensed table-hover table-striped" style="width:1050px">
                @foreach (var item in Model)
                {
                    <tr>
                        <td >@item.vmUserAcc.FirstName</td>
                        <td style="padding-left:50px !important">@item.vmPatientTable.PPS_No</td>
                        <td style="padding-left:35px !important">@item.vmPatientTable.Name</td>
                        <td style="padding-right:25px !important;padding-left:15px !important">@item.vmPatientTable.AddressLineOne</td>
                        <td style="padding-right:25px !important">@item.vmPatientTable.City</td>
                        <td style="padding-right:35px !important">@item.vmPatientTable.County</td>
                        <td style="padding-right:40px !important">@item.vmGuardian.Name</td>
                        <td style="padding-right:20px !important">@item.vmGuardian.PhoneNo</td>
                        <td style="padding-right:25px !important">@item.vmSchools.SchoolName</td>
                        <td style="padding-right:30px !important">@item.vmPatientTable.OpenDate.ToString("dd/MM/yyyy")</td>
                        <td>@item.vmPatientTable.CloseDate.ToString()</td>
                        <td></td>
                    </tr>
                }
            </table>
        }
        else
        {
            <p>No records found.</p>
        }
    </div>
</div>
<div id="Detail2">


</div>
<div id="Detail3">


</div>
<div id="Detail"></div>

@*</div>*@@*Container*@

@section scripts
{
    <script>
                                    function showPatient(patientId) {
                                        $.ajax({
                                            type: "GET",
                                            url: '@Url.Action("PatientNotes")',
                                            data: { id: patientId },
                                            success: function (data) {
                                                $('#Detail').hide();
                                                $('#Detail2').hide();
                                                $('#Detail1').hide();
                                                $('#Detail3').hide();
                                                $('#Detail').html(data);
                                                $('#Detail').fadeIn("slow");
                                            },
                                            error: function (data) {
                                                $('#Detail').html('<h3>Error in retrieval</h3>');
                                            }
                                        });
                                    }
                                    function showPatientDetails(patientId, dateId) {

                                        $.ajax({
                                            type: "GET",
                                            url: '@Url.Action("PatientNotesDetails")',
                                            data: { pd: patientId, dt: dateId },
                                            success: function (data) {
                                                $('#Detail').hde();

                                                $('#Detail1').html(data);
                                                $('#Detail1').fadeIn("slow");
                                            },
                                            error: function (data) {
                                                $('#Detail1').fadeIn("slow");
                                                alert("Error");
                                                $('#Detail1').html('<h3>Error in retrieval of Details</h3>');
                                            }
                                        });
                                    }
                                    function showPatientDetails2(patientId) {
                                        //alert("Show actors2 " + patientId);
                                        $.ajax({
                                            type: "GET",
                                            url: '@Url.Action("AddNote")',
                                            data: { id: patientId },
                                            success: function (data) {
                                                $('#Detail').hide();
                                                $('#Detail2').hide();
                                                //alert("Show actors2 ");
                                                $('#Detail2').html(data);
                                                $('#Detail2').fadeIn("slow");
                                            },
                                            error: function (data) {
                                                alert("Show actors2 error ");
                                                $('#Detail2').fadeIn("slow");
                                                alert("Error");
                                                $('#Detail2').html('<h3>Error in retrieval of Details (Add note)</h3>');
                                            }
                                        });
                                    }
                                    function showPatientDetails3(patientId) {
                                        //alert("Show actors2 " + patientId);
                                        $.ajax({
                                            type: "GET",
                                            url: '@Url.Action("Welcome")',
                                            data: { id: patientId },
                                            success: function (data) {
                                                window.location = '/Home/Welcome';
                                                //$('#Detail').hide();
                                                //$('#Detail2').hide();
                                                //alert("showPatientDetails3 ");
                                                //$('#Detail2').html(data);
                                                //$('#Detail2').fadeIn("slow");
                                            },
                                            error: function (data) {
                                                alert("Show actors2 error ");
                                                $('#Detail2').fadeIn("slow");
                                                alert("Error");
                                                $('#Detail2').html('<h3>Error in retrieval of Details (Welcome)</h3>');
                                            }
                                        });
                                    }
                                    function showPatientDetails4(patientId) {
                                        //alert("Patient ID " + patientId);
                                        $.ajax({
                                            type: "GET",
                                            url: '@Url.Action("ReassignPatient")',
                                            data: { id: patientId },
                                            success: function (data) {
                                                //window.location = 'ReassignPatient';
                                                //alert("Show student 2 ");
                                                $('#Detail').hide();
                                                $('#Detail2').hide();
                                                $('#Detail1').hide();
                                                //alert("Show student 1 ");
                                                $('#Detail3').html(data);
                                                $('#Detail3').fadeIn("slow");
                                            },
                                            error: function (data) {
                                                alert("Error ");
                                                $('#Detail2').fadeIn("slow");
                                                //alert("Error");
                                                $('#Detail2').html('<h3>Error in retrieval of Details(Reassing Patient) </h3>');
                                            }
                                        });
                                    }
    </script>
}
